<script language="javascript">
  function set_language(language) {
    let searchParams = new URLSearchParams(window.location.search);
    searchParams.delete("showLanguage");
    if(searchParams.toString().length > 0) {
      window.location.href = window.location.origin + window.location.pathname + "?" + searchParams.toString() + "&showLanguage=" + language;
    }
    else {
      window.location.href = window.location.origin + window.location.pathname + "?showLanguage=" + language;
    }
  }
  function detect_language() {
    let searchParams = new URLSearchParams(window.location.search);
    let browserLanguage = window.navigator.language.replaceAll('-','_');

    if (searchParams.has("showLanguage")) {
      let languageText = "Language";
      let languageSelected = searchParams.get("showLanguage");
      switch(languageSelected) {
        case "pt_BR":
          languageText = "LÃ­ngua";
          break;
        //case "es_ES":
        //  languageText = "Idioma";
        //  break;
        default:
          languageSelected = "en_US";
      }
      document.getElementById("languageButton_"+languageSelected).classList.add("aui-button-primary");
    }
    else if (browserLanguage) {
      let browserLanguageSelected = browserLanguage;
      switch(browserLanguageSelected) {
        case "pt_BR":
          break;
        //case "es_ES":
        //  break;
        default:
          browserLanguageSelected = "en_US";
      }
      document.getElementById("languageButton_"+browserLanguageSelected).classList.add("aui-button-primary");
    }
    else {
      document.getElementById("languageButton_en_US").classList.add("aui-button-primary");
    }
  }
</script>
<style>
  .aui-button.aui-button-primary, .aui-button.aui-button-primary:visited {
    background-color: #65379b !important;
  }
  .button-language-flag {
    top: 8%;
    height: 1em;
    position: relative;
  }
</style>
<p>
<button id="languageButton_en_US" type="button" class="contentf-button aui-button" style="text-decoration: none" onclick="set_language('en_US')"><img class="button-language-flag" src="https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/a51a7674-8d5d-4495-a2d2-a67c090f5c3b/32x32/1f1fa-1f1f8.png"/>&nbsp;&nbsp;English</button>
<button id="languageButton_pt_BR" type="button" class="contentf-button aui-button" style="text-decoration: none" onclick="set_language('pt_BR')"><img class="button-language-flag" src="https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/a51a7674-8d5d-4495-a2d2-a67c090f5c3b/32x32/1f1e7-1f1f7.png"/>&nbsp;&nbsp;Portugu&#234;s (Brasil)</button>
<!-- <button id="languageButton_es_ES" type="button" class="contentf-button aui-button" style="text-decoration: none" onclick="set_language('es_ES')"><img class="button-language-flag" src="https://pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/a51a7674-8d5d-4495-a2d2-a67c090f5c3b/32x32/1f1ea-1f1f8.png"/>&nbsp;&nbsp;Espa&#241;ol</button> -->
</p>
<script>
  detect_language();
</script>
